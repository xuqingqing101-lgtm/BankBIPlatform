# ğŸ”§ ä¿®å¤ "Failed to fetch" é”™è¯¯

## âŒ é”™è¯¯ä¿¡æ¯

```
å¥åº·æ£€æŸ¥å¤±è´¥: TypeError: Failed to fetch
```

---

## ğŸ” é—®é¢˜åŸå› 

**"Failed to fetch" æ„å‘³ç€å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯**

å¯èƒ½çš„åŸå› ï¼š
1. âŒ åç«¯æ²¡æœ‰å¯åŠ¨
2. âŒ åç«¯å¯åŠ¨äº†ä½†Controlleræ²¡æœ‰æ³¨å†Œï¼ˆè¿”å›404ï¼‰
3. âŒ ç«¯å£è¢«å ç”¨æˆ–é…ç½®é”™è¯¯
4. âŒ CORSé—®é¢˜
5. âŒ ç½‘ç»œé—®é¢˜

---

## âœ… è§£å†³æ–¹æ¡ˆ

### ğŸ¯ å¿«é€Ÿä¿®å¤ï¼ˆ3æ­¥ï¼‰

#### **ç¬¬1æ­¥ï¼šå¯åŠ¨åç«¯**

```bash
cd backend
REBUILD.bat
```

**âš ï¸ å…³é”®ï¼šå¿…é¡»ç­‰å¾…å¯åŠ¨å®Œæˆï¼**

**æˆåŠŸæ ‡å¿— - å¿…é¡»çœ‹åˆ°ï¼š**
```
========================================
ğŸ¦ é“¶è¡Œæ™ºèƒ½AIåˆ†æå¹³å°å·²å¯åŠ¨
========================================
APIåœ°å€: http://localhost:8080/api
========================================
```

**å¹¶ä¸”æ—¥å¿—ä¸­å¿…é¡»çœ‹åˆ°Controlleræ˜ å°„ï¼š**
```
Mapped "{[/],methods=[GET]}" onto com.bank.bi.controller.WelcomeController.welcome()
Mapped "{[/health],methods=[GET]}" onto com.bank.bi.controller.WelcomeController.health()
Mapped "{[/ai/chat],methods=[POST]}" onto ...
Mapped "{[/panel/items],methods=[GET]}" onto ...
```

**âŒ å¦‚æœæ²¡æœ‰çœ‹åˆ°è¿™äº›æ˜ å°„ï¼Œè¯´æ˜Controlleræ²¡æœ‰æ³¨å†Œï¼Œç»§ç»­çœ‹ç¬¬2æ­¥ï¼**

---

#### **ç¬¬2æ­¥ï¼šéªŒè¯åç«¯**

æ‰“å¼€æ–°çš„å‘½ä»¤è¡Œçª—å£ï¼Œæµ‹è¯•ï¼š

```bash
curl http://localhost:8080/api/health
```

**âœ… æˆåŠŸå“åº”ï¼š**
```json
{
  "status": "UP",
  "message": "é“¶è¡Œæ™ºèƒ½AIåˆ†æå¹³å°è¿è¡Œæ­£å¸¸"
}
```

**âŒ å¦‚æœè¿”å›404æˆ–è¿æ¥å¤±è´¥ï¼š**
- åç«¯æ²¡æœ‰æ­£ç¡®å¯åŠ¨
- Controlleræ²¡æœ‰æ³¨å†Œ
- ç»§ç»­çœ‹ç¬¬3æ­¥

---

#### **ç¬¬3æ­¥ï¼šå®Œå…¨é‡æ–°ç¼–è¯‘**

å¦‚æœä¸Šé¢çš„æµ‹è¯•å¤±è´¥ï¼Œæ‰§è¡Œå®Œå…¨æ¸…ç†é‡æ–°ç¼–è¯‘ï¼š

```bash
cd backend

# åœæ­¢å½“å‰æœåŠ¡ï¼ˆå¦‚æœåœ¨è¿è¡Œï¼‰
# åœ¨RUN.batçª—å£æŒ‰ Ctrl+C

# åˆ é™¤æ—§çš„ç¼–è¯‘æ–‡ä»¶
rmdir /s /q target

# æ¸…ç†
mvn clean

# é‡æ–°ç¼–è¯‘
mvn compile

# å¯åŠ¨
mvn spring-boot:run
```

**ç­‰å¾…å¯åŠ¨ï¼Œå†æ¬¡æµ‹è¯•ï¼š**
```bash
curl http://localhost:8080/api/health
```

---

## ğŸ§ª è¯¦ç»†è¯Šæ–­

### æ­¥éª¤1ï¼šæ£€æŸ¥åç«¯æ˜¯å¦åœ¨è¿è¡Œ

```bash
# æµ‹è¯•ç«¯å£8080æ˜¯å¦è¢«å ç”¨
netstat -ano | findstr :8080
```

**å¦‚æœæœ‰è¾“å‡ºï¼š** è¯´æ˜8080ç«¯å£è¢«å ç”¨
**å¦‚æœæ²¡æœ‰è¾“å‡ºï¼š** è¯´æ˜åç«¯æ²¡æœ‰å¯åŠ¨

---

### æ­¥éª¤2ï¼šæ£€æŸ¥åç«¯æ—¥å¿—

æŸ¥çœ‹åç«¯å¯åŠ¨æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ï¼š

**å¸¸è§é”™è¯¯ï¼š**

#### âŒ ç«¯å£è¢«å ç”¨
```
Port 8080 was already in use
```

**è§£å†³ï¼š**
```bash
# æ‰¾åˆ°å ç”¨8080çš„è¿›ç¨‹
netstat -ano | findstr :8080

# ç»“æŸè¯¥è¿›ç¨‹ï¼ˆPIDæ˜¯æœ€åä¸€åˆ—çš„æ•°å­—ï¼‰
taskkill /PID <PID> /F

# é‡æ–°å¯åŠ¨
cd backend
REBUILD.bat
```

---

#### âŒ Controlleræ²¡æœ‰æ³¨å†Œ

**ç—‡çŠ¶ï¼š** æ—¥å¿—ä¸­æ²¡æœ‰ "Mapped" ä¿¡æ¯

**è§£å†³ï¼š**
```bash
cd backend

# å®Œå…¨æ¸…ç†
rmdir /s /q target
mvn clean

# é‡æ–°ç¼–è¯‘
mvn compile

# å¯åŠ¨
mvn spring-boot:run
```

---

#### âŒ ç¼–è¯‘é”™è¯¯

**ç—‡çŠ¶ï¼š** çœ‹åˆ°ç¼–è¯‘é”™è¯¯ä¿¡æ¯

**è§£å†³ï¼š**
1. æ£€æŸ¥JDKç‰ˆæœ¬ï¼š`java -version`ï¼ˆåº”è¯¥æ˜¯17ï¼‰
2. æ£€æŸ¥Mavené…ç½®
3. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯å¹¶ä¿®å¤

---

### æ­¥éª¤3ï¼šæ£€æŸ¥å‰ç«¯é…ç½®

ç¡®è®¤APIåŸºç¡€URLæ­£ç¡®ï¼š

```typescript
// lib/api.ts
const API_BASE_URL = 'http://localhost:8080/api';
```

**åº”è¯¥æ˜¯ï¼š**
- âœ… `http://localhost:8080/api`

**ä¸åº”è¯¥æ˜¯ï¼š**
- âŒ `https://localhost:8080/api` ï¼ˆä¸æ˜¯httpsï¼‰
- âŒ `http://localhost:3000/api` ï¼ˆç«¯å£ä¸å¯¹ï¼‰

---

### æ­¥éª¤4ï¼šæµ‹è¯•ç½‘ç»œè¿æ¥

#### æµ‹è¯•1ï¼šæµè§ˆå™¨ç›´æ¥è®¿é—®

åœ¨æµè§ˆå™¨æ‰“å¼€ï¼š
```
http://localhost:8080/api/health
```

**âœ… åº”è¯¥çœ‹åˆ°JSONæ•°æ®ï¼š**
```json
{
  "status": "UP",
  "message": "é“¶è¡Œæ™ºèƒ½AIåˆ†æå¹³å°è¿è¡Œæ­£å¸¸"
}
```

**âŒ å¦‚æœçœ‹åˆ°404ï¼š**
- Controlleræ²¡æœ‰æ³¨å†Œ
- é‡æ–°è¿è¡Œ `REBUILD.bat`

**âŒ å¦‚æœæ— æ³•è¿æ¥ï¼š**
- åç«¯æ²¡æœ‰å¯åŠ¨
- ç«¯å£é…ç½®é”™è¯¯

---

#### æµ‹è¯•2ï¼šcurlæµ‹è¯•

```bash
# æµ‹è¯•æ¬¢è¿é¡µ
curl http://localhost:8080/api/

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:8080/api/health

# æµ‹è¯•è®¤è¯å¥åº·
curl http://localhost:8080/api/auth/health
```

**æ‰€æœ‰è¯·æ±‚éƒ½åº”è¯¥è¿”å›JSONæ•°æ®ï¼Œä¸åº”è¯¥æ˜¯404ï¼**

---

#### æµ‹è¯•3ï¼šå®Œæ•´APIæµ‹è¯•

```bash
cd backend
test-all-apis.bat
```

**åº”è¯¥çœ‹åˆ°ï¼š**
```
âœ… é€šè¿‡ - æ¬¢è¿é¡µ
âœ… é€šè¿‡ - å¥åº·æ£€æŸ¥
âœ… é€šè¿‡ - è®¤è¯å¥åº·
âœ… é€šè¿‡ - AIå¯¹è¯
âœ… é€šè¿‡ - å¯¹è¯åˆ—è¡¨
âœ… é€šè¿‡ - Pinåˆ—è¡¨
```

**å¦‚æœæœ‰å¤±è´¥ï¼š** Controlleræ²¡æœ‰æ­£ç¡®æ³¨å†Œ

---

## ğŸ”„ å®Œæ•´é‡å¯æµç¨‹

å¦‚æœä¸Šé¢çš„æ–¹æ³•éƒ½ä¸è¡Œï¼Œæ‰§è¡Œå®Œæ•´é‡å¯ï¼š

```bash
# 1. åœæ­¢åç«¯ï¼ˆCtrl+Cï¼‰

# 2. è¿›å…¥backendç›®å½•
cd backend

# 3. åˆ é™¤targetç›®å½•
rmdir /s /q target

# 4. åˆ é™¤æ‰€æœ‰ç¼–è¯‘ç¼“å­˜
mvn clean

# 5. é‡æ–°ä¸‹è½½ä¾èµ–ï¼ˆå¯é€‰ï¼‰
mvn dependency:purge-local-repository

# 6. é‡æ–°ç¼–è¯‘
mvn clean compile

# 7. å¯åŠ¨
mvn spring-boot:run

# 8. ç­‰å¾…çœ‹åˆ°å¯åŠ¨æˆåŠŸå’ŒControlleræ˜ å°„

# 9. æµ‹è¯•
curl http://localhost:8080/api/health
```

---

## ğŸ¯ æˆåŠŸæ ‡å¿—

### âœ… åç«¯æˆåŠŸå¯åŠ¨

**å‘½ä»¤è¡Œæ˜¾ç¤ºï¼š**
```
========================================
ğŸ¦ é“¶è¡Œæ™ºèƒ½AIåˆ†æå¹³å°å·²å¯åŠ¨
========================================

Mapped "{[/],methods=[GET]}" onto com.bank.bi.controller.WelcomeController.welcome()
Mapped "{[/health],methods=[GET]}" onto com.bank.bi.controller.WelcomeController.health()
Mapped "{[/ai/chat],methods=[POST]}" onto com.bank.bi.controller.AiController.chat(...)
Mapped "{[/panel/items],methods=[GET]}" onto com.bank.bi.controller.PanelController.getItems(...)
```

---

### âœ… APIæµ‹è¯•æˆåŠŸ

```bash
curl http://localhost:8080/api/health
```

**è¿”å›ï¼š**
```json
{
  "status": "UP",
  "message": "é“¶è¡Œæ™ºèƒ½AIåˆ†æå¹³å°è¿è¡Œæ­£å¸¸"
}
```

---

### âœ… å‰ç«¯è¿æ¥æˆåŠŸ

åˆ·æ–°å‰ç«¯é¡µé¢ï¼Œå³ä¸‹è§’æ˜¾ç¤ºï¼š
```
âœ… åç«¯è¿æ¥æ­£å¸¸
```

---

## ğŸ› ä»ç„¶å¤±è´¥ï¼Ÿ

### æ£€æŸ¥æ¸…å•

- [ ] åç«¯å·²å¯åŠ¨ï¼ˆçœ‹åˆ°å¯åŠ¨æˆåŠŸä¿¡æ¯ï¼‰
- [ ] æ—¥å¿—æ˜¾ç¤ºControlleræ˜ å°„
- [ ] `curl http://localhost:8080/api/health` è¿”å›JSON
- [ ] 8080ç«¯å£æ²¡æœ‰è¢«å…¶ä»–ç¨‹åºå ç”¨
- [ ] JDKç‰ˆæœ¬æ˜¯17
- [ ] Mavenå¯ä»¥æ­£å¸¸è¿è¡Œ

### è¯Šæ–­å·¥å…·

```bash
# 1. æ£€æŸ¥Javaç‰ˆæœ¬
java -version

# 2. æ£€æŸ¥Mavenç‰ˆæœ¬
mvn -version

# 3. æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr :8080

# 4. æ£€æŸ¥Controlleræ–‡ä»¶
cd backend
diagnose-controllers.bat

# 5. æµ‹è¯•æ‰€æœ‰API
test-all-apis.bat
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

1. **è¿è¡Œ `backend/REBUILD.bat`**
2. **ç­‰å¾…çœ‹åˆ°Controlleræ˜ å°„**
3. **è¿è¡Œ `curl http://localhost:8080/api/health`**
4. **åˆ·æ–°å‰ç«¯é¡µé¢**

**å¦‚æœcurlæµ‹è¯•æˆåŠŸï¼Œå‰ç«¯å°±èƒ½è¿æ¥ï¼**

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æµè§ˆå™¨å¼€å‘è€…å·¥å…·

1. æ‰“å¼€å‰ç«¯é¡µé¢
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ° **Networkï¼ˆç½‘ç»œï¼‰** æ ‡ç­¾
4. åˆ·æ–°é¡µé¢
5. æŸ¥æ‰¾ `health` è¯·æ±‚

**å¯èƒ½çš„æƒ…å†µï¼š**

#### âŒ è¯·æ±‚æ˜¾ç¤º "failed"
- åç«¯æ²¡æœ‰å¯åŠ¨
- åç«¯ç«¯å£ä¸å¯¹
- CORSé—®é¢˜

#### âŒ è¯·æ±‚æ˜¾ç¤º "404"
- Controlleræ²¡æœ‰æ³¨å†Œ
- è·¯å¾„ä¸å¯¹

#### âœ… è¯·æ±‚æ˜¾ç¤º "200"
- æˆåŠŸï¼å‰åç«¯å·²è¿æ¥

---

## ğŸ’¡ å¸¸è§åœºæ™¯

### åœºæ™¯1ï¼šç¬¬ä¸€æ¬¡å¯åŠ¨

```bash
cd backend
REBUILD.bat

# ç­‰å¾…ç¼–è¯‘å’Œå¯åŠ¨
# çœ‹åˆ°Controlleræ˜ å°„åæµ‹è¯•
curl http://localhost:8080/api/health
```

---

### åœºæ™¯2ï¼šä¿®æ”¹äº†ä»£ç å

```bash
cd backend

# åœæ­¢æœåŠ¡ï¼ˆCtrl+Cï¼‰
# é‡æ–°ç¼–è¯‘
REBUILD.bat

# ç­‰å¾…å¯åŠ¨å¹¶æµ‹è¯•
```

---

### åœºæ™¯3ï¼šç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨8080çš„è¿›ç¨‹
netstat -ano | findstr :8080

# ç»“æŸè¿›ç¨‹
taskkill /PID <PID> /F

# é‡æ–°å¯åŠ¨
cd backend
REBUILD.bat
```

---

## âš¡ æœ€å¿«çš„è§£å†³æ–¹æ³•

```bash
cd backend

# åœæ­¢æœåŠ¡ï¼ˆCtrl+Cï¼‰

# åˆ é™¤ç¼–è¯‘æ–‡ä»¶
rmdir /s /q target

# é‡æ–°ç¼–ï¿½ï¿½ï¿½å¯åŠ¨
REBUILD.bat

# ç­‰å¾…å¯åŠ¨å®Œæˆï¼ˆçœ‹åˆ°Controlleræ˜ å°„ï¼‰

# æ–°å¼€å‘½ä»¤è¡Œæµ‹è¯•
curl http://localhost:8080/api/health

# å¦‚æœè¿”å›JSONï¼Œå°±æˆåŠŸäº†ï¼
```

---

**ç°åœ¨æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ“ä½œï¼Œåº”è¯¥å¯ä»¥è§£å†³é—®é¢˜ï¼** ğŸš€

**å…³é”®æ˜¯çœ‹åˆ°Controlleræ˜ å°„å’Œcurlæµ‹è¯•æˆåŠŸï¼**
